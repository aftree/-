# 存储

**存储的内容比较广泛和零散，概念比较多，下面我就分享一下学习存储的心得**

## 一、基本概念

1、什么是数据及数据与信息的区别：数据可以理解为对所有事物的数字表示，信息是经过加工处理的数据，它是在数据层面上经过

提炼得出来的有价值的数据。其实这两个概念都比较简单，但是非常重要。

2、了解了数据及信息的定义后，大家会想这么多的数据哪些是有用的呢？数据是否有价值是谁来决定的呢？带着这些问题，我们看一下

三个名词，分别是：RPO、RTO、和 COT，如果仅仅对这3个名词进行解释的话效果并不好，会让你联想为死记硬背的概念。所以，我就用通俗易懂的话语来说一下三个名词的作用：RPO的作用是统计发生灾难时我到底丢失了多少数据；RTO的作用是我想要恢复丢失的数据需要多长时间；COT的作用是灾难期间我公司每小时损失的数据成本是多少。有兴趣的话，大家可以去百度一下这三个名词缩写的具体含义。

3、第三个概念是现在比较流行的即ICT，ICT=IT+CT 就是信息技术与通信技术的融合。这个也是华为未来的发展方向。

4、最后说一下ICT的基础架构，其实可以理解为存储的架构，我们可以简单的理解为：主机+网络+存储，随着学习的深入以后会慢慢的丰富这个架构。

基本定义说完以后接下来说一下现在存储里面比较流行的三种解决方案，虽然很多人都听过但是真正能理解的人却不算太多。

二、网络存储技术：DAS、NAS、SAN

又是三个英文单词的缩写，如果想真正理解其含义及作用，必须进行单独的解析，下面我分别说一下三个名词。

1、DAS：直连式存储，可以理解为直接相连的存储方案。也是最早的存储设备，其他的不用多想知道它直连的就可以了。DAS一般分为两种类型：内部DAS和外部DAS，两者的区别是依据于连接位置区分的。处理器和存储设备放在一起的就是内部DAS，例如服务器；处理器和存储设备分离的就是外部DAS。DAS有个致命的缺陷就是连接距离最大不能超过25m，这个缺陷显示了DAS的发展。

2、NAS：网络附加存储，可以简单的理解为通过网络进行共享的技术，说白了就是共享服务，NAS常用的共享协议是NFS和CIFS，前者是类UNIX系统使用的协议，后者是Windows用的协议。NAS一般可以分为盘控一体和盘分离，盘指的是存储阵列，控指的是控制器，一般的NAS设备最少是双控（A控+B控）。

3、SAN：存储区域网络，它是DAS的升级版本，随着数据和设备的增加，DAS已经不能满足工作和生活的需要，所以出现了SAN，它弥补了DAS的不足。这三个技术的出现顺序是DAS早于SAN，SAN早于NAS，是不是有点意外。

第三部分介绍这三个技术中涉及和使用到的协议，也是大家比较熟悉的名词。

存储服务器

首先：磁盘阵列是存储介质，磁盘阵列其实是一大堆磁盘组成的一块大硬盘，通过做RAID实现并行读写，并通过数据校验保证数据的正确性和安全性。

而存储[服务器](http://www.enkj.com/idc/zuyong/)分为文件服务器和备份服务器，文件服务器使磁盘阵列可以对外文件级的共享服务；备份服务器安装备份软件，可以对业务服务器产生的业务数据进行备份和归档，而备份方式、备份策略等都是可以在备份服务器上设定的。

存储服务器是用来备份重要文件等作用的，以防万一可以及时找回，而磁盘阵列是用在一个主机里安装2块硬盘，2块硬盘作相同的任务，但系统里只能看到一块，这是为了防止系统硬盘突然损坏，另一块可以马上起到备用作用。

三、存储常用的协议

1、ATA和SATA：其实这个定义可以不用记住，因为是比较老的东西，现在用的也不多，大家了解一下就可以了。

ATA是一种很早就出现的接口类型，后者是前者的改进即串行的ATA。

2、SCSI：这个出现的也是比较早，最先由IBM公司提出来，前期用于小型机的接口，全称叫“小型计算机系统接口”S（small）C（computer）S（system）I（interface）。后来又衍生出ISCSI。

3、SAS：就是串行的SCSI。

4、FC：光纤通道协议，它是光纤传输使用的协议。

接下来说一下市场上流行的几种硬盘，他们各自的特点及区别。

四、常用的硬盘

1、SATA盘：比较早的硬盘，现在基本不用了，特点是存储容量大，价格低；缺点是读取速度慢，不适合频繁的操作。

2、SAS盘：串行SCSI盘，现在比较流行的盘，特点是读取速度快，价格适中，性价比高。

3、SSD盘：固态硬盘，特点是读取速度极快，价格昂贵，生命周期短暂，性价比底。

4、NL-SAS：近线SAS，盘体采用的SATA，接口采用SAS，结合了两者的优点于一身，主要用在容量盘中。

下面介绍RAID技术。

五、传统RAID技术

RAID的定义：独立磁盘冗余阵列，它的作用主要是容灾和备份，容灾可以理解为容许灾难发生，备份就不用多说了，也可以理解为数据恢复技术还有就是保障数据的写入和读取的效率。

RAID根据业务不同的分为不同的等级：0、1、2、3、4、5、6、10、50等，其中2和4不常用，但是确实存在，剩下的

是比较常用的RAID级别，下面简单的说一下几个RAID的区别。

1、RAID0: 把数据同时写入2块硬盘，读取效率提升50%，没有备份盘，坏了就完了，不能恢复和重构数据，作用

仅仅是提高性能。一般单独做RAID0的很少。

2、RAID1：把一样的数据分别拷贝到两个盘上，这两个盘的数据完全一样，缺点是硬盘的利用率只有50%，优点是当一个盘坏掉，另一个盘可以正常使用。

3、RAID3：最少需要4个硬盘，其中一个硬盘作为校验盘，具有数据校验的功能，所有校验的信息都放到校验盘中。当某个数据

丢失后，通过其他数据和校验盘进行异或运算推出丢失的数据，优点：数据丢失后可以恢复，缺点：需要额外的校验盘，还有一点就是存在“写惩罚”。

4、RAID5：RAID3的升级版，去掉了校验盘，所有校验任务都平均分配到各个盘中，可以理解为分布式存储，优点是数据恢复速度快，不需要校验盘；缺点是：每个盘都参与校验，硬盘使用频率高，损坏的几率也高。

5、RAID6：继续升级，有2块校验盘，有2种校验模式，例如：P+Q校验 和 DP校验，优点是其他RAID不能比拟的，它允许同时损坏2块硬盘，是不是很给力。

6、最后这个其实就2个组合：RAID10：先做RAID1，再做RAID0，这种模式性能和效率都很高比较流行。

RAID50：先做RAID5，再做RAID0

下面说一下两个概念。

六、其他知识

1、大数据

SNIA（全球网络存储工业协会）对大数据下的定义是，在最强大的计算平台上都无法对全部数据进行有效的处理的数据集合。

提到数据不得不对其进行分类，我们可以简单的分为2类：结构化数据和非结构化数据，当然也有人分为三类即增加了半结构化数据，

在这里我们简单的分为2类即可。结构化数据是指用二维表可以逻辑的表示出来的数据，例如，Excel、数据库等。非结构化数据是不能用二维表逻辑的表示出来，例如，图片、视频、文档等。

2、云计算

云就是互联网，就是互联网计算。它有三种部署模式和三种商业模式，部署模式有：私有云、公有云和混合云，这里不详细的介绍。商业模式有：IAAS（基础架构就是一种服务）、PAAS（平台也算是一种服务）、SAAS（软件也是一种服务）综上所述云计算就是卖服务的，就像电力集团卖电一样。

七、RAID2.0+

上面说的RAID是传统RAID技术，随着技术的发展，主流厂商纷纷提出来新的RAID技术，RAID2.0+是华为推出的，它的核心思想是把数据平均分配到每个磁盘上，当读取数据的时候所有磁盘都参与进来，这样读取的速率就会大大的增加。

首先将所有磁盘都划分为单个的chunk，多个chunk组成一个chunk组（ckg）。从ckg中再细分成extent，根据磁盘类型的不同，extent的大小也不一样。SAS盘和SSD盘中extent的大小为64M，NL-SAS盘extent的大小为256M，所有的extent组成一个卷，从卷中再映射出Lun，呈献给用户的就是一个个的Lun，一个Lun就是一个逻辑卷。其实在extent中还可以继续划分为更小的单位即grain，它是thin Lun的组成单位。

7。云存储服务

8分布式文件系统

### 什么是云存储?

首先，需要了解云存储的定义。

云存储是基于云计算（Cloud Computing）建立起来的一个网络存储技术即与计算的存储部分，将网络中的不同设备通过应用程序连接起来，进行协同工作，对外提供数据存储和业务访问。总体来说，云存储已经成为一种服务，即为用户提供存储和访问服务。

云存储作为一种服务，通过网络提供给用户。用户们可以通过以下几种方式来使用存储，并按照使用来付费。

1. 通过互联网开放接口（如REST），使得第三方网站可以通过云存储提供的服务为用户提供完整的Web服务。
2. 用户直接使用存储相关的在线服务，比如网络硬盘，在线存储，在线备份和在线归档等服务；
3. 用户传送文件或者服务商发布内容时的缓冲。

### 云存储是一种怎么样的服务？

带上了存储二字之后，很多用户会在第一时间想到平时自己所只用的存储设备，但是我们再这里要强调的是云存储是一类如同广域网一样的服务。云存储对于使用者而言，并不是指某一种特定的设备，俄日是指一个由许许多多存储设备和服务器构成的集合体。使用者使用云存储，也并不是使用了某一个设备，而是使用了整个系统带来的数据访问服务。

所以，云存储的核心是应用软件与存储设备相结合，并通过应用软件来实现存储设备向存储服务的转变。

### 云存储有哪些优点？

1. 节约成本。云存储最大的特点就是可以减少成本，以最少的花销来得到高质量的存储服务。
2. 便利的数据迁移。通过云存储，本地数据备份以及异地数据处理变得更加方便。让数据脱离原有的设备闲限制，能够分家快速方便的进行管理。
3. 性能优势，在现在数据量激增的年代，对于数据存储读取上的性能，就成为衡量存储质量的一个很严格的标准，相比于传统的存储设备，云存储服务能够调用更多的资源来满足用户的需求，给予用户更好的用户体验。

### 云存储的缺点是什么？

1. 信息安全性问题。相对于独立的存储设备，云存储由于成为一种透明的服务，对于很多用户来说，如何保证存储信息的安全就成为一个严峻的问题。
2. 运营商的稳定性。由于几乎完全依赖网络，起服务的稳定性，也就成为云存储业务的一个很大的隐患。

### 云存储的模式有哪些？

目前市面上的云存储主要分为三种：公有云、私有云和混合云

### 1.公共云存储

供应商可以保持每个客户的存储、应用都是独立的，私有的。其中以Dropbox为代表的个人云存储服务是公共云存储发展较为突出的代表。

公共云存储可以划出一部分用作私有云存储。一个公司可以拥有或控制基础架构，以及应用的部署，私有云存储可以部署在企业数据中心或相同地点的设施上。私有云可以由公司自己的IT部门管理，也可以由服务供应商管理。

### 2.内部云存储

这种云存储和私有云存储比较类似，唯一的不同点是它仍然位于企业防火墙内部。至2014年可以提供私有云的平台有：Eucalyptus、3A Cloud、minicloud安全办公私有云、联想网盘等。

### 3.混合云存储

这种云存储把公共云和私有云内部云结合在一起。主要用于按客户要求的访问，特别是需要临时配置容量的时候。从公共云上划出一部分容量配置一种私有或内部云可以帮助公司面对迅速增长的负载波动或高峰时很有帮助。尽管如此，混合云存储带来了跨公共云和私有云分配应用的复杂性。

对象存储是无层次结构的数据存储方法，通常用于云中。不同于其他[数据存储 \(英文\)](http://www.ibm.com/cloud-computing/what-is-cloud-storage)方法，基于对象的存储不使用目录树。各个单独的数据（对象）单元存在于存储池中的同一级别。每个对象都有唯一的识别名称，供应用进行检索。此外，每个对象可包含有助于检索的元数据。

* 数据作为单独的对象进行存储。
* 数据并不放置在目录层次结构中，而是存在于平面地址空间内。
* 应用通过唯一地址来识别每个单独的数据对象。
* 可用代客泊车作类比。每个数据对象就像一辆车；地址就是收据。
* 专为使用 API 在应用级别（而非用户级别）进行访问而设计。

