# 服务器



## 服务器定义及发展史 <a id="&#x670D;&#x52A1;&#x5668;&#x5B9A;&#x4E49;&#x53CA;&#x53D1;&#x5C55;&#x53F2;"></a>

### 服务器概念: <a id="&#x670D;&#x52A1;&#x5668;&#x6982;&#x5FF5;"></a>

![&#x670D;&#x52A1;&#x5668;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%9C%8D%E5%8A%A1%E5%99%A8.png)

图：服务器概念

服务器也是一种计算机。

服务器，也称伺服器，是提供计算服务的设备。由于服务器需要响应服务请求，并进行处理，因此一般来说服务器应具备承担服务并且保障服务的能力。

服务器的构成包括处理器、硬盘、内存，系统，总线等，和通用的计算机架构类似，但是由于需要提供高可靠的服务，因此在处理能力、稳定性、可靠性、安全性、可扩展性、可管理性等方面要求较高。

### 服务器与客户机： <a id="&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x5BA2;&#x6237;&#x673A;&#xFF1A;"></a>

服务器在网络中为其他客户机提供计算或应用服务。客户机可以是PC机，智能手机，ATM等终端设备，也可以是其他的服务器。甚至是火车，飞机等大型系统设备。

### 服务器的特性： <a id="&#x670D;&#x52A1;&#x5668;&#x7684;&#x7279;&#x6027;&#xFF1A;"></a>

1. 高速度的CPU运算能力
2. 长时间的可靠运行
3. 强大的I/O外部数据吞吐能力
4. 服务器通常具有更高的性能，效率，高可靠，高可用性，以及更好的扩展性。

### 工业革命4.0： <a id="&#x5DE5;&#x4E1A;&#x9769;&#x547D;4-0&#xFF1A;"></a>

计算机，IT信息技术等科学技术的快速发展，推动了从上世纪40年代至今的第三次科技革命。在第三次科技革命的基础之上，信息技术，大数据与物联网相结合而形成的智能工厂，智能生产等成为工业4.0的关键。

服务器技术的快速发展，对工业3.0和4.0产生了直接的推动作用。

### 服务器的发展史： <a id="&#x670D;&#x52A1;&#x5668;&#x7684;&#x53D1;&#x5C55;&#x53F2;&#xFF1A;"></a>

![&#x670D;&#x52A1;&#x5668;&#x6F14;&#x8FDB;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%BC%94%E8%BF%9B.png)

图：服务器演进

1. 第一台电子计算机诞生在1946年。揭开了人类科学计算与信息技术的新纪元。
2. 1964年，IBM开发出的第一台大型机System 360，成为真正意义上的服务器。它采用创新的集成电路设计，计算性能达到每秒100万次。System 360价格非常昂贵，每台价格高达200到300万美元约合现在的2000多万美元。

   **第一台服务器商业应用：**

   这台服务器赏识之后全球订单蜂拥而至，创造了许多技术和商业的第一。例如：它协助美国太空总署建立阿波罗11号的数据库，完成了航天员登录月球计划。

3. 1965年，DEC公司开发了一块PDP-8小型机，掀起了一场小型机的革命。这台小型机服务器体积变小了。更加易用，价格也更便宜了。深受用户的喜爱，也推动了服务器技术的进步，使之面向更广的应用领域发展。
4. 90年代，Unix服务器， RISC CPU 和Unix操作系统。今天的小型机概念是指计算机技术发展到90年代，又原来的大型机衍生出来的一种，针对中小型企业低成本的Unix服务器，这类服务器通常采用RISC CPU和Unix操作系统，因此国外将其分类为Unix Server，国内俗称为小型机。
5. 1989年，第一台X86服务器，Intel 486微处理器。

   Intel成功将当时的Intel 486 CPU推广到服务器领域。由康柏公司生产了业界第一台X86服务器。Intel这一创举致使服务器变的低廉，变的平民化，普及化。Intel在X86架构领域的持续创新，也慢慢确立了X86服务器的市场地位，并逐步走到了领先地位。今天的X86服务器已经是市场上的绝对主流。成功占据着行业的领先地位，出货量占比高代98%以上。销售量占比80%以上。

6. 服务器核心部件CPU发展至今，一直在遵循摩尔定律进行快速的演进与创新。现在全球的处理器，绝大多数都采用了性能较强的Intel处理器。

## 服务器类型 <a id="&#x670D;&#x52A1;&#x5668;&#x7C7B;&#x578B;"></a>

### 服务器按外形分类： <a id="&#x670D;&#x52A1;&#x5668;&#x6309;&#x5916;&#x5F62;&#x5206;&#x7C7B;&#xFF1A;"></a>

![&#x5916;&#x5F62;&#x5206;&#x7C7B;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E5%A4%96%E5%BD%A2%E5%88%86%E7%B1%BB.png)

图：服务器按外形分类

服务器按外形分类可以分为：

1. 塔式服务器
2. 机架服务器
3. 刀片式服务器
4. 高密度服务器

### 服务器按CPU数量分类： <a id="&#x670D;&#x52A1;&#x5668;&#x6309;CPU&#x6570;&#x91CF;&#x5206;&#x7C7B;&#xFF1A;"></a>

![CPU&#x5206;&#x7C7B;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/CPU%E5%88%86%E7%B1%BB.png)

图：服务器按CPU数量分类

服务器按CPU数量进行分类，可以分为：

1. 单路服务器（一路服务器）
2. 双路服务器（两路服务器）
3. 四路服务器
4. 多路服务器

这种分类方式，也最常体现到不同厂家服务器类型的分类上。如华为的RH2288为两路服务器，RH5885为四路服务器，RH8100为八路服务器。

### 服务器按指令集分类： <a id="&#x670D;&#x52A1;&#x5668;&#x6309;&#x6307;&#x4EE4;&#x96C6;&#x5206;&#x7C7B;&#xFF1A;"></a>

![&#x6307;&#x4EE4;&#x96C6;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%8C%87%E4%BB%A4%E9%9B%86.png)

图：服务器按指令集分类

有的Unix服务器不采用CPU数量分类，而是采用CPU内核数量进行分类。早期的CPU只有一个内核，后来的新技术可以将多个内核封装在一个CPU芯片中，性能得到数倍的提升。

现在我们经常谈到的如小型机，X86服务器，小机迁移等，这是以CPU类型，也就是CPU指令集进行分类。

按CPU指令集进行分类有：

1. RISC精简指令集CPU

   采用RISC CPU的服务器通常运行Unix操作系统，国外称为Unix服务器，国内俗称为小型机。

2. CISC复杂指令集CPU

   X86 CPU则采用的是CISC指令集，采用X86 CPU的服务器称为X86服务器。

### 服务器按应用分类： <a id="&#x670D;&#x52A1;&#x5668;&#x6309;&#x5E94;&#x7528;&#x5206;&#x7C7B;&#xFF1A;"></a>

![&#x5E94;&#x7528;&#x5206;&#x7C7B;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E5%BA%94%E7%94%A8%E5%88%86%E7%B1%BB.png)

图：服务器按应用分类

我们最关心的是服务器上面运行的业务种类和负载类型，不同的业务应用和负载需要不同类型的服务器来承载。从这个角度上通常可分为：

1. 数据库服务器
2. 应用服务器
3. Web服务器
4. 接入服务器
5. 文件服务器等

### 服务器发展变化： <a id="&#x670D;&#x52A1;&#x5668;&#x53D1;&#x5C55;&#x53D8;&#x5316;&#xFF1A;"></a>

随着服务器不断发展，服务器的外形也不断发生着变化，体积不断缩小，更加节能省电。从塔式服务器后来发展为更薄更小的机架式服务器。后来又退出了高度，节能，管理优化的刀片式服务器。

### 服务器硬件组成构成： <a id="&#x670D;&#x52A1;&#x5668;&#x786C;&#x4EF6;&#x7EC4;&#x6210;&#x6784;&#x6210;&#xFF1A;"></a>

![&#x670D;&#x52A1;&#x5668;&#x786C;&#x4EF6;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A1%AC%E4%BB%B6.png)

图：服务器硬盘组成

服务器的主要硬件主要包含**CPU、内存、硬盘**三大组件。另外还配置有主板、机箱、电源、风扇灯基础硬件。以及RAID卡、网卡等可选部件。CPU、内存、硬盘三大件占服务器成本的2/3以上。

### 主流服务器厂商： <a id="&#x4E3B;&#x6D41;&#x670D;&#x52A1;&#x5668;&#x5382;&#x5546;&#xFF1A;"></a>

除了IBM，Oracle等厂商的大小型机外，各厂商的X86服务器都是跟着Intel的产品开发节奏走，三大件也通用化了，这导致各厂商的服务器从原理上看大体相差不多。当然也各有差异，主要体现在产品的工业化，模块化设计，RAS特性，可扩展，可管理型差异，以及品牌服务能力等。

## 服务器技术架构 <a id="&#x670D;&#x52A1;&#x5668;&#x6280;&#x672F;&#x67B6;&#x6784;"></a>

### 服务器技术架构的三大发展趋势： <a id="&#x670D;&#x52A1;&#x5668;&#x6280;&#x672F;&#x67B6;&#x6784;&#x7684;&#x4E09;&#x5927;&#x53D1;&#x5C55;&#x8D8B;&#x52BF;&#xFF1A;"></a>

![&#x67B6;&#x6784;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%9E%B6%E6%9E%84.png)

图：服务器发展三大趋势

客户需求决定了服务器的发展方向。从服务器的技术架构来看，目前整个服务器的技术架构的发展有三个大趋势：

1. Scale-up纵向扩展架构
2. Scale-out横向扩展架构
3. Hyper-converged超融合架构

### Scale-up纵向扩展架构特性： <a id="Scale-up&#x7EB5;&#x5411;&#x6269;&#x5C55;&#x67B6;&#x6784;&#x7279;&#x6027;&#xFF1A;"></a>

![Scale-up](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/Scale-up.png)

图：Scale-up架构特性

* 主要是提升单体服务器的计算性能。包括高可靠，高可用以及可扩展性。主要适用于高性能交易类业务。如：企业核心交易数据库；关键应用系统以及HPC高性能计算机等业务。
* Scale-up架构被广泛应用于金融交易，电信计费，科学研究，气象分析等领域。
* Scale-up服务器可以比作一艘庞大而战斗力超强的大型战列舰，具有强大的武器装备和作战性能，是大规模海战的核心作战系统。

### Scale-out横向扩展架构特性: <a id="Scale-out&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x67B6;&#x6784;&#x7279;&#x6027;"></a>

* 简单说就是以数量取胜。Scale-out架构通常对单台服务器的性能要求不高，主要通过更多的服务器来协同完成任务。
* Scale-out通常具有**高并发性能、低成本、高密度、节能低碳、统一管理**等特点。
* 这种架构通常使用与超大规模数据中心、大数据分析、共有云、Web应用集群等业务场景。
* Scale-out系统可以比作是一个轻型的快艇集群，通过群狼战术，实现整体的作战效能。

### Hyper-converged超融合架构： <a id="Hyper-converged&#x8D85;&#x878D;&#x5408;&#x67B6;&#x6784;&#xFF1A;"></a>

![&#x8D85;&#x878D;&#x5408;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E8%B6%85%E8%9E%8D%E5%90%88.png)

图：超融合架构特性

* 这种架构的理念是将计算、存储、网络和统一管理放在一个盒子里，可以做到开箱即用，提供一个整体的计算解决方案。这样的架构设计，可达到整体系统的一体化融合集成，性能优化，建议管理的目的。通过一体化的设计、集成与优化，消除系统瓶颈，实现更好的整体系统效能。
* 超融合架构主要应用于高性能数据分析，数据库整合，云计算资源池平台，一体化数据中心等应用场景。
* Hyper-converged的超融合架构可以比作一艘航空母舰，通过系统平台的整体集成与优化设计。既拥有超强的核动力驱动，又有强大的舰载机集群，远程防控，巡航导弹等综合火力打击系统，以及C4SIR综合情报，管理与指挥控制系统，形成一个超强的整体优势作战平台。

### 业务应用和服务器部署： <a id="&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x548C;&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#xFF1A;"></a>

* **单机系统：**

  早期的服务器系统都是单机应用，在一台服务器上部署了所有的应用软件。为一个或几个用户提供计算或业务服务，这种单机系统通常也被称为工作站。

* **C/S应用部署架构**：

  ![Cs](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/Cs.png)

  图：C/S架构

  在C/S共享系统中，通常会有一个集中共享的应用数据库，而每个员工会有自己的PC机，在每台PC机上要安装相同或不同的应用程序，这些应用程序能够操作使用或者共享应用数据库。这样能够实现业务数据的协同操作，应用共享和统一保存。

  在C/S架构中，由一个共享数据库对应多个应用客户端，构成两次的应用部署架构。这些应用程序的部署，配置和维护都比较复杂。软件升级也需要每天客户端逐一的升级，不利于应用的灵活部署，也不利于大规模的客户应用和推广。

* **B/S架构模式：**

  ![bs](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/bs.png)

  图：B/S架构模式

  为了解决C/S架构所面临的问题，在C/S架构的基础上，又提出了一种优化的B/S架构。也就是Browse/Server三层模式的应用系统架构。B/S架构伴随着因特网的兴起而发展起来，是对C/S架构的一种改进。

  在B/S架构中，PC机客户端只需要有一个标准的Web浏览器，不需要安装其他的应用程序。而类似于C/S架构中的数据库，应用服务器软件都被安装在后台的服务器上，使用用户通过Web浏览器连接登录到服务器即可获得相应的服务。当需要使用不同的应用服务时，客户只需要用Web浏览器连接到不同的应用服务器即可。

  B/S架构的Web客户端使用简单，免维护。而业务应用软件，数据库系统，则可以集中，统一部署，统一维护。非常适用于大规模应用系统的部署与服务。

  互联网业务是典型的B/S架构。

* 由于互联网业务的并发点击负载高，海量大数据等特点。因此互联网业务的后台服务系统的架构模式，一直是朝着开放，分布式的架构模式发展，并不断产生新的变化与技术创新。今天如百度，腾讯数据中心的互联网架构，普遍采用大规模分布式的数据库，Hadoop大数据集群，高密Scale-out水平扩展的应用，搜索，Web集群接入的部署架构模式。

## 服务器上层软件架构 <a id="&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5C42;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;"></a>

### 服务器的系统安装与业务部署： <a id="&#x670D;&#x52A1;&#x5668;&#x7684;&#x7CFB;&#x7EDF;&#x5B89;&#x88C5;&#x4E0E;&#x4E1A;&#x52A1;&#x90E8;&#x7F72;&#xFF1A;"></a>

![OS](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/OS.png)

图：常见OS

* 主流的Unix服务器操作系统有AIX Solaris和HP-un11。
* X86服务器的操作系统通常是Linux系统和Windows操作系统。
* 对于云计算平台通常要安装VMware，FusionSphere或KVM等虚拟化系统。虚拟化系统可以将一个物理服务器模拟成多台小的虚拟化服务器来使用，通过服务器虚拟化化能够提供更好的资源使用效率，自动部署和简化管理。

#### 主要服务器数据库： <a id="&#x4E3B;&#x8981;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x5E93;&#xFF1A;"></a>

![&#x6570;&#x636E;&#x5E93;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E5%BA%93.png)

图：主流数控软件

主流的数据库有，Oracle，IBM DB2数据库，开源的My SQL数据库，以及国产的人大金仓，达梦数据库等。

#### 主要服务器中间件： <a id="&#x4E3B;&#x8981;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x95F4;&#x4EF6;&#xFF1A;"></a>

![&#x4E2D;&#x95F4;&#x4EF6;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E4%B8%AD%E9%97%B4%E4%BB%B6.png)

图：主要服务器中间件

目前市场上以Java中间件为主，比如商用的中间件有Weblogic，Webspher，Tuxedo，东方通等。开源的中间件有，Tomcat JBoss中间件等。中间件可以为上层应用软件提供运行和开发环境。提供预制可复用的业务功能模块，API接口等，帮助用户灵活、高效地开发和基础复杂的应用系统。

#### 主要服务器业务应用： <a id="&#x4E3B;&#x8981;&#x670D;&#x52A1;&#x5668;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#xFF1A;"></a>

![&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E4%B8%9A%E5%8A%A1%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6.png)

图：主要服务器业务应用

业务应用软件是面向客户的应用逻辑层软件。比如ERP，CRM，HR等应用软件。业务应用软件通常是基于数据库、中间件等基础架构平台之上，根据客户的需求进行定制开发，最终满足客户业务要求的软件系统。

#### 与云计算服务架构对应关系： <a id="&#x4E0E;&#x4E91;&#x8BA1;&#x7B97;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF1A;"></a>

![&#x4E91;&#x8BA1;&#x7B97;&#x670D;&#x52A1;](https://cshihong.github.io/2018/04/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9C%8D%E5%8A%A1.png)

图：与云计算服务架构对应关系

* 通常来讲包括服务器，存储，网络等硬件基础设施，以及操作系统，虚拟化层。对应的是IaaS云服务层。
* 数据库、中间件通常会对应PaaS云服务层。
* 业务应用层软件则会面向SaaS层服务。

